var ToolKit=function(){var publicProps={},privateProps={devMode:!1};return privateProps.db=localStorage,privateProps.lifeSpan=100,privateProps.minLifeSpan=10,privateProps.maxLifeSpan=1e4,privateProps.templates={},privateProps.components={},privateProps.Query={},privateProps.Query.table=[],privateProps.Query.results=[],privateProps.Query.cols=[],privateProps.Query.queryString="",privateProps.Query.limit=privateProps.Query.table.length,privateProps.Query.limiter=100,privateProps.Query.offset=0,privateProps.Query.onCoolDown=function(){},privateProps.Query.onComplete=function(){},publicProps.Utils={},publicProps.Utils.isDefined=function(e){return null!=e},publicProps.Utils.isDevMode=function(){return privateProps.devMode},publicProps.Utils.toggleDevMode=function(){privateProps.devMode=!privateProps.devMode},publicProps.log=function(e){if(privateProps.devMode)try{console.log(e)}catch(e){}},publicProps.TemplateEngine=function(e,r){for(var t,o=/<%([^%>]+)?%>/g,n=/(^( )?(if|for|else|switch|case|break|var|let|const|this|try|catch|finally|console|self|{|}|;|:|[|]))(.*)?/g,p="var r=[];\nvar data = this;\n",i=0,s=function(e,r){return p+=r?e.match(n)?e+"\n":"r.push("+e+");\n":""!=e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",s};t=o.exec(e);)s(e.slice(i,t.index))(t[1],!0),i=t.index+t[0].length;return s(e.substr(i,e.length-i)),p+='return r.join("");',new Function(p.replace(/[\r\t\n]/g,"")).apply(r)},publicProps.Utils.$one=function(e){return document.querySelector(e.toString())},publicProps.Utils.$all=function(e){return document.querySelectorAll(e.toString())},publicProps.Utils.setLifeSpan=function(e){try{e=parseInt(e.toString())}catch(e){publicProps.log("\n\nError! Utils, parseInt, lifeSpan.toString"),publicProps.log(e)}!isNaN(e)&&e>=privateProps.minLifeSpan&&e<=privateProps.maxLifeSpan&&(privateProps.lifeSpan=e)},publicProps.Store={},publicProps.Store.get=function(r){var t=null;try{t=JSON.parse(privateProps.db.getItem(r.toString()))}catch(e){try{t=privateProps.db.getItem(r.toString())}catch(e){publicProps.log("\n\nError! Store, getItem, key.toString"),publicProps.log(e)}}return privateProps.db=localStorage,t},publicProps.Store.set=function(e,r){var t=r||null;try{t=JSON.stringify(t)}catch(e){publicProps.log("\n\nError! Store, JSON.stringify, data"),publicProps.log(e)}try{privateProps.db.setItem(e.toString(),t)}catch(e){publicProps.log("\n\nError! Store, setItem, data"),publicProps.log(e)}privateProps.db=localStorage},publicProps.Session={},publicProps.Session.get=function(e){return privateProps.db=sessionStorage,publicProps.Store.get(e)},publicProps.Session.set=function(e,r){privateProps.db=sessionStorage,publicProps.Store.set(e,r)},publicProps.Component={},privateProps.Component=function(e){var r,t,o=this,n={},p=e||{};if(n.render=publicProps.TemplateEngine,n.name=p.name,n.root=p.root,n.template=p.template,n.onStateChange=p.onStateChange,n.onRender=p.onRender,n.lifeSpan=p.lifeSpan||privateProps.lifeSpan,n.monitor=p.monitor||!1,n.state=p.state,n.sync=p.sync||!0,n.persistance=p.persistance||!1,r=JSON.parse(JSON.stringify(n.state)),!0===n.persistance){var i=publicProps.Store.get(n.name);null!=i&&(n.state=i,r=JSON.parse(JSON.stringify(n.state)))}o.startLifeCycle=function(){null!=t&&o.endLifeCycle(),t=setInterval(function(){JSON.stringify(n.state)!==JSON.stringify(r)&&("function"==typeof n.onStateChange&&n.onStateChange(),!0===n.persistance&&publicProps.Store.set(n.name,n.state),!0===n.sync&&(n.root.innerHTML=n.render(n.template,n.state),"function"==typeof n.onRender&&n.onRender(n.root)),r=JSON.parse(JSON.stringify(n.state)))},n.lifeSpan)},o.endLifeCycle=function(){if(null!=t)try{clearInterval(t)}catch(e){publicProps.log("\n\nError! Component, clearInterval, lifecycle"),publicProps.log(e)}},!0===n.sync&&(n.root.innerHTML=n.render(n.template,n.state)),o.startLifeCycle()},publicProps.Component.registerComponent=function(r){var e,t={};if(null==r||"object"!=typeof r)return publicProps.log("Invalid properties for a component.");if(null==r.name||null==r.root||null==r.template||null==r.state)return publicProps.log("Invalid properties for a component.");if("string"!=typeof r.name)return publicProps.log("Invalid properties for a component.");if(!r.root instanceof Element)return publicProps.log("Invalid properties for a component.");if("string"!=typeof r.template)return publicProps.log("Invalid properties for a component.");if("object"!=typeof r.state)return publicProps.log("Invalid properties for a component.");if(t.name=r.name,t.root=r.root,t.template=r.template,t.state=r.state,null!=r.dereference&&"boolean"==typeof r.dereference&&r.dereference)try{t.state=JSON.parse(JSON.stringify(r.state))}catch(e){try{publicProps.log(e),publicProps.log("\n\nError! Component, JSON.parse/stringify, props.state"),t.state=r.state.toString()}catch(e){publicProps.log("\n\nError! Component, JSON.parse/stringify, props.state.toString"),publicProps.log(e)}}null!=r.onStateChange&&"function"==typeof r.onStateChange&&(t.onStateChange=r.onStateChange),null!=r.onRender&&"function"==typeof r.onRender&&(t.onRender=r.onRender),null!=r.lifeSpan&&!isNaN(r.lifeSpan)&&r.lifeSpan>=privateProps.minLifeSpan&&r.lifeSpan<=privateProps.maxLifeSpan&&(t.lifeSpan=r.lifeSpan),null!=r.monitor&&"boolean"==typeof r.monitor&&(t.monitor=r.monitor),null!=r.sync&&"boolean"==typeof r.sync&&(t.sync=r.sync),null!=r.presistance&&"boolean"==typeof r.persistance&&(t.persistance=r.persistance),e=new privateProps.Component(t),privateProps.components[t.name]=e},publicProps.Component.getComponentList=function(){return privateProps.components},publicProps.Component.getComponent=function(e){var r=null;try{r=privateProps.components[e.toString()]}catch(e){publicProps.log("\n\nError! Component, name.toString"),publicProps.log(e)}return r},publicProps.Service=function(e){var r=e||{},t=r.password||"",o=r.username||"",n=new XMLHttpRequest;if(null==r.url||null==r.method||"string"!=typeof r.url||"string"!=typeof r.method)return publicProps.log("Invalid arguments for an AJAX call to occur.");if(n.open(r.method,r.url,!0,o,t),n.setRequestHeader("X-Content-Type-Options","nosniff"),null!=r.headers&&typeof r.headers instanceof Array)for(var p=0,i=r.headers;p<i;p++){var s=r.headers[p],a=s.key||s.name||"",l=s.value||"";n.setRequestHeader(a,l)}if(null!=r.data&&null==r.contentType)try{r.data=JSON.stringify(r.data)}catch(e){publicProps.log("\n\nError! Service, JSON.parse, args.data"),publicProps.log(e)}else null!=r.contentType&&"string"==typeof r.contentType&&n.setRequestHeader("Content-Type",r.contentType);null!=r.fail&&"function"==typeof r.fail&&(n.addEventListener("fail",function(){r.fail(n)}),null!=r.abort&&"function"==typeof r.abort||n.addEventListener("abort",function(){r.fail(n)})),null!=r.abort&&"function"==typeof r.abort&&n.addEventListener("abort",function(){r.abort(n)}),null!=r.success&&"function"==typeof r.success&&n.addEventListener("load",function(){var e=n.response;try{e=JSON.parse(e)}catch(e){publicProps.log("\n\nError! Service, JSON.parse, data"),publicProps.log(e)}r.success(e)}),n.send(r.data)},publicProps.Query={},publicProps.Query.setTable=function(e){e instanceof Array&&(privateProps.Query.table=e)},publicProps.Query.setColumns=function(e){e instanceof Array&&(privateProps.Query.cols=e)},publicProps.Query.getTable=function(){return privateProps.Query.table},publicProps.Query.getResults=function(){return privateProps.Query.results},publicProps.Query.onComplete=function(e){"function"==typeof e&&(privateProps.Query.onComplete=e)},publicProps.Query.onCoolDown=function(e){"function"==typeof e&&(privateProps.Query.onCoolDown=e)},publicProps.Query.limit=function(e){var r=e;try{r=parseInt(e.toString())}catch(e){publicProps.log("\n\nError! Query, parseInt, limit.toString"),publicProps.log(e)}!isNaN(r)&&r<privateProps.table.length&&0<r&&(privateProps.Query.limit=e)},publicProps.Query.offset=function(e){var r=privateProps.table.length-1;try{e=parseInt(e.toString())}catch(e){}!isNaN(e)&&e<r&&0<e&&(privateProps.Query.offset=e)},publicProps.Query.select=function(e){if("string"==typeof e){for(var r=e,t=privateProps.Query.cols,o=[{txt:"AND",symbol:"&&"},{txt:"OR",symbol:"||"},{txt:"NOT",symbol:"!"},{txt:"EQ",symbol:"=="},{txt:"NEQ",symbol:"!="},{txt:"LT",symbol:"<"},{txt:"LTE",symbol:"<="},{txt:"GT",symbol:">"},{txt:"GTE",symbol:">="}],n=0,p=o.length;n<p;n++){var i=o[n],s=new RegExp("\\b"+i.txt+"\\b","g"),a=" "+i.symbol+" ";r=r.replace(s,a)}for(n=0,p=t.length;n<p;n++){var l=t[n];s=new RegExp("\\b"+l+"\\b","g"),a='record["'+l+'"]';r=r.replace(s,a)}privateProps.Query.queryString=r}},publicProps.Query.exe=function(){var records=privateProps.Query.table,results=privateProps.Query.results,onComplete=privateProps.Query.onComplete,onCoolDown=privateProps.Query.onCoolDown,limiter=privateProps.Query.limiter,end=privateProps.Query.limit,offset=privateProps.Query.offset,whereClause=privateProps.Query.queryString;end<=0&&(end=privateProps.Query.limit=privateProps.Query.table.length);var isComplete=function(){return results.length>=end-1||end-1<=offset},execution=function(){for(var i=offset;i<limiter;i++){var record=records[i];if(isComplete())return onComplete(results);eval(whereClause)&&results.push(record),offset=i}onCoolDown(results),setTimeout(execution,privateProps.lifeSpan)};execution()},publicProps.DOM={},publicProps.DOM.ready=function(e){var r;"complete"!==(r=document.readyState.toString())&&"loaded"!==r&&"interactive"!==r?document.addEventListener("DOMContentLoaded",function(){if("function"==typeof e)return e()}):e()},publicProps.Router={},publicProps.Router.routes=[],publicProps.Router.mode="hash",publicProps.Router.root="/",publicProps.Router.add=function(e,r){"function"==typeof e&&(r=e,e=""),publicProps.Router.routes.push({re:e,handler:r})},publicProps.Router.navigate=function(e){e=e||"";var r=publicProps.Router.routes;window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+e;for(var t=0,o=r.length;t<o;t++){var n=r[t];try{if(null!=e.match(n.re))return n.handler()}catch(e){publicProps.log(e)}}},publicProps}();