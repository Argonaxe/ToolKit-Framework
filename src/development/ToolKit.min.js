var ToolKit=function(){var publicProps={},privateProps={devMode:!1};return privateProps.db=localStorage,privateProps.lifeSpan=100,privateProps.minLifeSpan=10,privateProps.maxLifeSpan=1e4,privateProps.templates={},privateProps.components={},privateProps.Query={},privateProps.Query.table=[],privateProps.Query.results=[],privateProps.Query.cols=[],privateProps.Query.queryString="",privateProps.Query.limit=privateProps.Query.table.length,privateProps.Query.limiter=100,privateProps.Query.offset=0,privateProps.Query.onCoolDown=function(){},privateProps.Query.onComplete=function(){},publicProps.Utils={},publicProps.Utils.Paginate=function(e){var o=[],n=[],p=0,i=5,t={getLimit:function(){return i},getIndex:function(){return p},getArray:function(){var t;try{t=JSON.parse(JSON.stringify(o))}catch(e){t=o}return t},getSubset:function(){var t;try{t=JSON.parse(JSON.stringify(n))}catch(e){t=n}return t},setLimit:function(e){try{var t=parseInt(e);!isNaN(t)&&0<t&&t<=o.length?i=t:0===t||t<0?i=0:t>o.length&&(i=o.length)}catch(e){}},setArray:function(e){Array.isArray(e)&&(o=e,r())}},r=function(){n=[];for(var e=p*i||0,t=e+5,r=e;r<t&&null!=o[r];r++)n.push(o[r]);return n};return t.next=function(){return p<o.length&&p++,r()},t.prev=function(){return 0<p&&p--,r()},t.setArray(e),t},publicProps.Utils.isDefined=function(e){return null!=e},publicProps.Utils.isDevMode=function(){return privateProps.devMode},publicProps.Utils.toggleDevMode=function(){privateProps.devMode=!privateProps.devMode},publicProps.log=function(e){if(privateProps.devMode)try{console.log(e)}catch(e){}},publicProps.TemplateEngine=function(e,t){for(var r,o=/<%([^%>]+)?%>/g,n=/(^( )?(if|for|else|switch|case|break|var|let|const|this|try|catch|finally|console|self|{|}|;|:|[|]))(.*)?/g,p="var r=[];\nvar data = this;\n",i=0,l=function(e,t){return p+=t?e.match(n)?e+"\n":"r.push("+e+");\n":""!=e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",l};r=o.exec(e);)l(e.slice(i,r.index))(r[1],!0),i=r.index+r[0].length;return l(e.substr(i,e.length-i)),p+='return r.join("");',new Function(p.replace(/[\r\t\n]/g,"")).apply(t)},publicProps.Utils.$one=function(e,t){return"string"==typeof e&&"string"!=typeof t?(t=e.toString(),e=document):"string"==typeof e&&"string"==typeof t&&(e=document.querySelector(e)),e.querySelector(t)},publicProps.Utils.$all=function(e,t){return"string"==typeof e&&"string"!=typeof t?(t=e.toString(),e=document):"string"==typeof e&&"string"==typeof t&&(e=document.querySelector(e)),e.querySelectorAll(t)},publicProps.Utils.setLifeSpan=function(e){try{e=parseInt(e.toString())}catch(e){publicProps.log("\n\nError! Utils, parseInt, lifeSpan.toString"),publicProps.log(e)}!isNaN(e)&&e>=privateProps.minLifeSpan&&e<=privateProps.maxLifeSpan&&(privateProps.lifeSpan=e)},publicProps.Store={},publicProps.Store.get=function(t){var r=null;try{r=JSON.parse(privateProps.db.getItem(t.toString()))}catch(e){try{r=privateProps.db.getItem(t.toString())}catch(e){publicProps.log("\n\nError! Store, getItem, key.toString"),publicProps.log(e)}}return privateProps.db=localStorage,r},publicProps.Store.set=function(e,t){var r=t||null;try{r=JSON.stringify(r)}catch(e){publicProps.log("\n\nError! Store, JSON.stringify, data"),publicProps.log(e)}try{privateProps.db.setItem(e.toString(),r)}catch(e){publicProps.log("\n\nError! Store, setItem, data"),publicProps.log(e)}privateProps.db=localStorage},publicProps.Session={},publicProps.Session.get=function(e){return privateProps.db=sessionStorage,publicProps.Store.get(e)},publicProps.Session.set=function(e,t){privateProps.db=sessionStorage,publicProps.Store.set(e,t)},publicProps.Component={},privateProps.Component=function(e){var t,r,o=this,n={},p=e||{},i=!1;if(n.render=publicProps.TemplateEngine,n.name=p.name,n.root=p.root,null!=p.template?n.template=p.template:null!=p.templateURL&&(i=!0,n.template=null),n.onStateChange=p.onStateChange,n.onRender=p.onRender,n.lifeSpan=p.lifeSpan||privateProps.lifeSpan,n.monitor=p.monitor||!1,n.state=p.state,n.sync=p.sync||!0,n.persistance=p.persistance||!1,n.append=p.append||!1,t=JSON.parse(JSON.stringify(n.state)),!0===n.persistance){var l=publicProps.Store.get(n.name);null!=l&&(n.state=l,t=JSON.parse(JSON.stringify(n.state)))}null!=p.templateURL&&!0===i&&publicProps.Service({method:"GET",url:p.templateURL,success:function(e){n.template=e}}),o.startLifeCycle=function(){null!=r&&o.endLifeCycle(),r=setInterval(function(){null!=n.template&&(JSON.stringify(n.state)!==JSON.stringify(t)&&("function"==typeof n.onStateChange&&n.onStateChange(),!0===n.persistance&&publicProps.Store.set(n.name,n.state),!0===n.sync&&(n.append?n.root.innerHTML+=n.render(n.template,n.state):n.root.innerHTML=n.render(n.template,n.state),"function"==typeof n.onRender&&n.onRender(n.root)),t=JSON.parse(JSON.stringify(n.state))))},n.lifeSpan)},o.endLifeCycle=function(){if(null!=r)try{clearInterval(r)}catch(e){publicProps.log("\n\nError! Component, clearInterval, lifecycle"),publicProps.log(e)}},!0===n.sync&&(n.append?n.root.innerHTML+=n.render(n.template,n.state):n.root.innerHTML=n.render(n.template,n.state)),o.startLifeCycle()},publicProps.Component.registerComponent=function(t){var e,r={};if(null==t||"object"!=typeof t)return publicProps.log("Invalid properties for a component.");if(null==t.name||null==t.root||null==t.template||null==t.templateURL||null==t.state)return publicProps.log("Invalid properties for a component.");if("string"!=typeof t.name)return publicProps.log("Invalid properties for a component.");if(!t.root instanceof Element)return publicProps.log("Invalid properties for a component.");if("string"!=typeof t.template&&null!=t.template)return publicProps.log("Invalid properties for a component.");if("object"!=typeof t.state)return publicProps.log("Invalid properties for a component.");if("string"!=typeof t.templateURL&&null!=t.templateURL)return publicProps.log("Invalid properties for a component.");if(r.name=t.name,r.root=t.root,null!=t.template?(r.template=t.template,arg.templateURL=null):null!=t.templateURL&&(r.templateURL=t.templateURL,r.template=null),r.state=t.state,null!=t.dereference&&"boolean"==typeof t.dereference&&t.dereference)try{r.state=JSON.parse(JSON.stringify(t.state))}catch(e){try{publicProps.log(e),publicProps.log("\n\nError! Component, JSON.parse/stringify, props.state"),r.state=t.state.toString()}catch(e){publicProps.log("\n\nError! Component, JSON.parse/stringify, props.state.toString"),publicProps.log(e)}}null!=t.onStateChange&&"function"==typeof t.onStateChange&&(r.onStateChange=t.onStateChange),null!=t.onRender&&"function"==typeof t.onRender&&(r.onRender=t.onRender),null!=t.lifeSpan&&!isNaN(t.lifeSpan)&&t.lifeSpan>=privateProps.minLifeSpan&&t.lifeSpan<=privateProps.maxLifeSpan&&(r.lifeSpan=t.lifeSpan),null!=t.monitor&&"boolean"==typeof t.monitor&&(r.monitor=t.monitor),null!=t.sync&&"boolean"==typeof t.sync&&(r.sync=t.sync),null!=t.presistance&&"boolean"==typeof t.persistance&&(r.persistance=t.persistance),null!=t.append&&"boolean"==typeof t.append&&(r.append=t.append),e=new privateProps.Component(r),privateProps.components[r.name]=e},publicProps.Component.getComponentList=function(){return privateProps.components},publicProps.Component.getComponent=function(e){var t=null;try{t=privateProps.components[e.toString()]}catch(e){publicProps.log("\n\nError! Component, name.toString"),publicProps.log(e)}return t},publicProps.Service=function(e){var t=e||{},r=t.password||"",o=t.username||"",n=new XMLHttpRequest;if(null==t.url||null==t.method||"string"!=typeof t.url||"string"!=typeof t.method)return publicProps.log("Invalid arguments for an AJAX call to occur.");if(n.open(t.method,t.url,!0,o,r),n.setRequestHeader("X-Content-Type-Options","nosniff"),null!=t.headers&&typeof t.headers instanceof Array)for(var p=0,i=t.headers;p<i;p++){var l=t.headers[p],s=l.key||l.name||"",a=l.value||"";n.setRequestHeader(s,a)}if(null!=t.data&&null==t.contentType)try{t.data=JSON.stringify(t.data)}catch(e){publicProps.log("\n\nError! Service, JSON.parse, args.data"),publicProps.log(e)}else null!=t.contentType&&"string"==typeof t.contentType&&n.setRequestHeader("Content-Type",t.contentType);null!=t.fail&&"function"==typeof t.fail&&(n.addEventListener("fail",function(){t.fail(n)}),null!=t.abort&&"function"==typeof t.abort||n.addEventListener("abort",function(){t.fail(n)})),null!=t.abort&&"function"==typeof t.abort&&n.addEventListener("abort",function(){t.abort(n)}),null!=t.success&&"function"==typeof t.success&&n.addEventListener("load",function(){var e=n.response||n.responseText;try{e=JSON.parse(e)}catch(e){publicProps.log("\n\nError! Service, JSON.parse, data"),publicProps.log(e)}t.success(e)}),n.send(t.data)},publicProps.Query={},publicProps.Query.setTable=function(e){e instanceof Array&&(privateProps.Query.table=e)},publicProps.Query.setColumns=function(e){e instanceof Array&&(privateProps.Query.cols=e)},publicProps.Query.getTable=function(){return privateProps.Query.table},publicProps.Query.getResults=function(){return privateProps.Query.results},publicProps.Query.onComplete=function(e){"function"==typeof e&&(privateProps.Query.onComplete=e)},publicProps.Query.onCoolDown=function(e){"function"==typeof e&&(privateProps.Query.onCoolDown=e)},publicProps.Query.limit=function(e){var t=e;try{t=parseInt(e.toString())}catch(e){publicProps.log("\n\nError! Query, parseInt, limit.toString"),publicProps.log(e)}!isNaN(t)&&t<privateProps.table.length&&0<t&&(privateProps.Query.limit=e)},publicProps.Query.offset=function(e){var t=privateProps.table.length-1;try{e=parseInt(e.toString())}catch(e){}!isNaN(e)&&e<t&&0<e&&(privateProps.Query.offset=e)},publicProps.Query.select=function(e){if("string"==typeof e){for(var t=e,r=privateProps.Query.cols,o=[{txt:"AND",symbol:"&&"},{txt:"OR",symbol:"||"},{txt:"NOT",symbol:"!"},{txt:"EQ",symbol:"=="},{txt:"NEQ",symbol:"!="},{txt:"LT",symbol:"<"},{txt:"LTE",symbol:"<="},{txt:"GT",symbol:">"},{txt:"GTE",symbol:">="}],n=0,p=o.length;n<p;n++){var i=o[n],l=new RegExp("\\b"+i.txt+"\\b","g"),s=" "+i.symbol+" ";t=t.replace(l,s)}for(n=0,p=r.length;n<p;n++){var a=r[n];l=new RegExp("\\b"+a+"\\b","g"),s='record["'+a+'"]';t=t.replace(l,s)}privateProps.Query.queryString=t}},publicProps.Query.exe=function(){var records=privateProps.Query.table,results=privateProps.Query.results,onComplete=privateProps.Query.onComplete,onCoolDown=privateProps.Query.onCoolDown,limiter=privateProps.Query.limiter,end=privateProps.Query.limit,offset=privateProps.Query.offset,whereClause=privateProps.Query.queryString;end<=0&&(end=privateProps.Query.limit=privateProps.Query.table.length);var isComplete=function(){return results.length>=end-1||end-1<=offset},execution=function(){for(var i=offset;i<limiter;i++){var record=records[i];if(isComplete())return onComplete(results);eval(whereClause)&&results.push(record),offset=i}onCoolDown(results),setTimeout(execution,privateProps.lifeSpan)};execution()},publicProps.DOM={},publicProps.DOM.ready=function(t){var e,r=function(){if("function"==typeof t)try{setTimeout(t,10)}catch(e){t()}};"complete"!==(e=document.readyState.toString())&&"loaded"!==e&&"interactive"!==e?document.addEventListener("DOMContentLoaded",r):r()},publicProps.Router={},publicProps.Router.routes=[],publicProps.Router.mode="hash",publicProps.Router.root="/",publicProps.Router.add=function(e,t){"function"==typeof e&&(t=e,e=""),publicProps.Router.routes.push({re:e,handler:t})},publicProps.Router.navigate=function(e){e=e||"";var t=publicProps.Router.routes;window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+e;for(var r=0,o=t.length;r<o;r++){var n=t[r];try{if(null!=e.match(n.re))return n.handler()}catch(e){publicProps.log(e)}if(null==e&&null==n.re)return n.handler()}},publicProps.Router.watch=function(t){var r=window.location.href.toString();try{clearInterval(publicProps.Router.monitorURI)}catch(e){}publicProps.Router.monitorURI=setInterval(function(){if(window.location.href!==r){r=window.location.href;var e="";-1<r.indexOf("#")&&(e=r.substring(r.indexOf("#")+1,r.length),"function"==typeof t&&t(),setTimeout(function(){publicProps.Router.navigate(e)},20))}},10)},publicProps}();